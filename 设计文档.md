# 游戏名称
Text Idle

# 高阶理念
一款深度策略型文字放置RPG。游戏致力于将《魔兽世界》的职业战术、《暗黑破坏神》的装备驱动、《流放之路》的物品制作等经典设计精髓，提炼并浓缩于纯粹的文字体验之中。我们摒弃繁杂的图形，旨在打造一个让玩家能心无旁骛、深度钻研策略与构筑（Build）的硬核游戏环境。

# 设计哲学
- **策略优先**: 游戏的核心乐趣源于深度的策略思考，而非频繁的操作。通过离线挂机机制解放玩家的时间，让每一次决策都显得至关重要。
- **透明化设计**: 采用"小数值"系统，所有属性、伤害计算、怪物行为逻辑等底层公式完全对玩家开放。我们鼓励玩家通过数据分析、战斗日志复盘等方式，成为精通游戏机制的大师。
- **致敬经典**: 汲取ARPG与MMORPG黄金时代的灵感，重现"战法牧"铁三角、仇恨机制、惊喜掉落以及装备词缀系统带来的无穷乐趣。

# 核心游戏循环
- **组建 (Assemble)**: 招募并组建一支五人小队。根据职业特性（如坦克、治疗、伤害输出），打造一支独一无二的冒险队伍。
-  **布局 (Strategize)**: 为每位角色精细配置战斗AI。设定技能释放的优先级、触发条件以及团队战术，让你的策略自动执行。
- **放置 (Engage)**: 队伍将依据你的策略自动进行探索与战斗，获取经验、金币与装备。即使玩家离线，探索也从不间断。
- **分析 (Analyze)**: 通过实时的战斗数据面板与详尽的挂机收益统计，精准评估当前策略的效率与短板。
- **优化 (Optimize)**: 使用获取的资源与装备强化你的队伍。调整技能搭配、更新装备、优化战术，以挑战更强大的敌人，追求更高的挂机收益。

# 关键特征
- **深度策略小队**: 经典的"坦克、治疗、DPS"角色定位与仇恨机制，要求玩家深刻理解职业 synergy，构筑平衡且高效的队伍。
- **装备驱动的乐趣**:
    - **暗黑式词缀系统**: 借鉴《暗黑破坏神2》，设计了从普通到独特的装备分级，以及丰富的随机词缀，让每一次掉落都充满惊喜。
    - **流放式强化系统**: 引入《流放之路》风格的通货道具，玩家可以通过它们来重塑或增强装备词缀，享受制作神装的乐趣。
- **轻度社交生态**:
    - **异步互动**: 通过世界聊天频道、排行榜、玩家交易市场以及PVP遭遇战等弱联网功能，在不强迫社交的前提下，提供丰富的玩家间互动与竞争。
- **复古极简美学**:

## 游戏概述
- **核心愿景 (Core Vision)**
	- 致力于为玩家提供一个纯粹、无负担、可长期沉浸的策略型放置游戏体验。我们旨在让玩家能够轻松利用碎片时间进行深度策略研究与享受游戏乐趣，而非被繁琐操作所束缚。
- **目标用户 (Target Audience)**
    - 追求深度策略与机制研究，乐于进行理论构筑（Theorycrafting）的核心玩家。
    - 热衷于《魔兽世界》、《暗黑破坏神》等经典RPG，享受团队配合与装备驱动乐趣的玩家群体。
    - 忙碌的上班族或学生党，渴望利用碎片时间放松，避免高频操作负担，但仍能体验到游戏深度。
- **独特卖点 (Unique Selling Points)**
    - **极致透明的机制**: 游戏所有底层机制、属性、计算公式完全公开，鼓励玩家深度挖掘，成为真正的策略大师。
    - **自由定制的战术**: 提供高度灵活的作战策略配置，玩家可自由定义队伍AI，实现千变万化的战术组合。
    - **数据驱动的优化**: 详尽的战斗数据统计与分析功能，帮助玩家直观评估策略效果，形成"策略制定-数据验证-迭代优化"的正向循环。

# 核心玩法与循环
- **组建 (Assemble)**: 角色获取与队伍构成
	- 队伍规模随进度逐步解锁：从 1 名角色起步，每推进一张地图增加一个席位，最终最多 5 人，让玩家在职业与机制上循序渐进，避免初期信息过载。
	- 每名新成员加入时，由玩家为其选择职业与初始技能，从而塑造独一无二的队伍构成。
- **布局 (Strategize)**: 战斗策略与 AI 配置
	- 在"坦克、治疗、DPS"定位与仇恨机制的基础上，为每位角色配置战斗 AI：自定义技能（含普攻）的释放条件、目标选择与优先级顺序，使策略自动执行。
	- 策略是否合理需结合战斗日志与数据统计来验证与迭代，形成"配置—观察—调整"的闭环。
- **放置 (Engage)**: 关卡、怪物与离线收益
	- 队伍按当前策略自动探索与战斗，持续获取经验、金币与装备；支持离线挂机，探索不中断。
	- 离线期间按真实战斗逻辑结算，数据统计与装备掉落与在线时一致，保证收益可预期。
	- 离线挂机设有最大累积时长，超时未上线则不再累积收益，鼓励定期回访。
	- 单场战斗的怪物数量多数与队伍人数一致，少数场次会多于或少于，用于调节难度与节奏。
	- 关卡与怪物命名借鉴《魔兽世界》经典地图与生物，强化熟悉感与代入感。
	- 怪物分为普通、精英、首领三档，强度与掉落品质逐级提升。
	- 通过击杀怪物积累关卡进度，达到要求后解锁后续关卡，驱动推进节奏。
	- 关卡探索中可能"偶遇"其他也在当前关卡挂机的玩家，触发 PVP；战斗结果单独统计，战胜可获得荣誉积分，用于兑换稀有道具，并参与荣誉排行榜。
- **分析 (Analyze)**: 战斗日志与数据统计
	- 通过实时战斗面板与挂机收益统计，评估策略效率、定位短板，为优化提供依据。
- **优化 (Optimize)**: 角色成长与装备驱动
	- 用获得的资源与装备强化队伍：升级技能、更换词缀装备、调整战术，以挑战更强敌人、提升挂机收益。
    
# 系统拆解
- **角色系统 (Character System)**
	- **职业设计 (Classes)**: 坦克、治疗、DPS的详细设定
	- **核心属性 (Attributes)**: 力量、敏捷、智力等
	- **成长体系 (Progression)**: 等级、经验曲线
	- **技能系统 (Skills)**: 主动、被动技能的设计与获取
        
- **战斗系统 (Combat System)**
	- **战斗流程**: 从进入战斗到结束的完整流程
	- **仇恨机制 (Threat)**: 怪物优先攻击仇恨值最高的角色；详细规则与计算公式
	- **核心战斗公式**: 命中、暴击、伤害计算等
	- **状态效果 (Status Effects)**: Buff/Debuff设计
        
- **物品系统 (Item System)**
	- **装备 (Equipment)**
		- **装备部位与类型**
		- **品质分级**: 普通、魔法、稀有、独特
		- **词缀系统**: 前缀、后缀、词缀池设计
	- **制作与强化 (Crafting & Enhancement)**
		- **通货道具 (Currency Items)**: 设计与功能
		- **强化规则**
	- **消耗品 (Consumables)**
        
- **经济系统 (Economy)**
	- **核心资源**: 种类、获取途径
	- **资源循环**: 资源的产出与消耗闭环
        
- **关卡与内容 (Levels & Content)**
	- **章节与关卡设计**
	- **怪物设计**: 包含普通、精英、首领（Boss）
	- **特殊挑战**: 如Boss Rush, 特定策略挑战等

---

# 职业与属性设计详细说明

## 一、职业设计 (Classes)

### 1.1 定位与职责

| 定位 | 英文标识 | 职责简述 | 核心能力 |
|------|----------|----------|----------|
| 坦克 | Tank | 承受怪物伤害，维持仇恨，保护队友 | 高护甲/生命、仇恨技能、减伤/格挡 |
| 治疗 | Healer | 维持队伍生命值，驱散负面效果 | 治疗技能、护盾、驱散 |
| 伤害输出 | DPS | 对敌人造成伤害，快速击杀目标 | 物理/法术伤害、爆发、控制 |

- **战法牧铁三角**: 一支标准队伍通常需要至少 1 名坦克、1 名治疗、若干 DPS，才能稳定应对关卡挑战。
- **仇恨机制**: 怪物默认攻击仇恨值最高的角色；坦克通过技能与普攻积累仇恨，DPS 需控制输出节奏避免 OT（仇恨溢出）。

### 1.2 职业列表

借鉴《魔兽世界》经典职业，初期提供以下职业（可按版本逐步解锁）：

| 职业 | 英文标识 | 定位 | 主属性 | 伤害类型 | 特色简述 |
|------|----------|------|--------|----------|----------|
| 战士 | Warrior | Tank / DPS | 力量 | 物理 | 高护甲、盾牌格挡、怒气机制 |
| 圣骑士 | Paladin | Tank / Healer / DPS | 力量/智力 | 物理/神圣 | 全能型，圣光治疗、审判伤害 |
| 牧师 | Priest | Healer / DPS | 智力 | 神圣/暗影 | 强治疗、暗影形态输出 |
| 德鲁伊 | Druid | Tank / Healer / DPS | 敏捷/智力 | 物理/自然 | 变形、持续治疗、多形态切换 |
| 法师 | Mage | DPS | 智力 | 奥术/冰霜/火焰 | 高爆发法术、控制 |
| 盗贼 | Rogue | DPS | 敏捷 | 物理 | 连击点、背刺、毒药 |
| 猎人 | Hunter | DPS | 敏捷 | 物理 | 远程、宠物、陷阱 |
| 术士 | Warlock | DPS | 智力 | 暗影/火焰 | 持续伤害、召唤物、生命吸取 |

### 1.3 主属性与成长

- 每个职业有 **主属性 (Primary Attribute)**，升级与装备提供的该属性收益更高。
- 职业可拥有 **副定位**（如圣骑士可 Tank/Heal/DPS），通过技能与装备选择实现不同玩法。

### 1.4 职业与技能关系

- 职业决定可学习的 **技能池**；玩家从池中选择技能装备到角色。
- 部分技能为职业专属，部分为通用（如普攻变体）。
- 技能获取方式：初始技能、升级解锁、装备/道具解锁。

---

## 二、核心属性 (Attributes)

### 2.1 属性定义

采用小数值、透明化设计，所有属性对战斗数值的影响公式对玩家完全公开。

| 属性 | 英文标识 | 主要影响 | 典型受益职业 |
|------|----------|----------|--------------|
| 力量 | Strength | 物理攻击力、护甲、格挡值 | 战士、圣骑士 |
| 敏捷 | Agility | 暴击率、闪避、物理命中 | 盗贼、猎人、德鲁伊 |
| 智力 | Intellect | 法术强度、法力上限、法术暴击 | 法师、牧师、术士、圣骑士 |
| 耐力 | Stamina | 生命值上限 | 全职业（坦克尤其重要） |
| 精神 | Spirit | 法力恢复、生命恢复（脱战） | 治疗职业 |

### 2.2 属性对战斗数值的影响（公式草案）

以下为可调参数，具体数值在实现时平衡。公式采用线性或分段线性，便于玩家理解与计算。

| 衍生属性 | 公式（示意） | 说明 |
|----------|--------------|------|
| 物理攻击力 | `PhysAtk = Base + Str * k1` | k1 为力量系数 |
| 法术强度 | `SpellPower = Base + Int * k2` | k2 为智力系数 |
| 护甲 | `Armor = Base + Str * k3 + 装备护甲` | 减少受到的物理伤害 |
| 法术抗性 | `Resistance = Base + 装备抗性` | 减少受到的法术伤害 |
| 生命值 | `HP = Base + Stam * k4` | k4 为耐力系数 |
| 法力值 | `MP = Base + Int * k5` | k5 为智力系数 |
| 暴击率 | `Crit = Base + Agi * k6` | 物理/法术暴击（按技能类型区分） |
| 闪避率 | `Dodge = Base + Agi * k7` | 闪避物理攻击 |
| 命中率 | `Hit = Base + Agi * k8` | 减少未命中概率 |

- **护甲减伤（物理伤害）**: `PhysDamageReduction = Armor / (Armor + C)`，C 为常数，控制曲线平滑度。
- **法术抗性减伤（法术伤害）**: `SpellDamageReduction = Resistance / (Resistance + C)`，与护甲公式一致，便于理解与平衡。物理伤害用护甲减免，法术伤害用法术抗性减免。
- **暴击伤害**: 默认 150% 或 200%，可由装备/技能修改。

### 2.3 属性来源

| 来源 | 说明 |
|------|------|
| 基础属性 | 职业与等级决定的基础值 |
| 升级成长 | 每级获得固定点数，按职业主属性分配 |
| 装备词缀 | 装备提供 +Str、+Agi、+Int、+护甲、+法术抗性 等词缀 |
| Buff/Debuff | 技能或状态效果临时增减属性 |

### 2.4 属性显示与透明化

- 角色面板展示：**基础属性** + **装备加成** + **Buff 加成** = **最终属性**。
- 战斗日志与数据统计中，可展示关键衍生数值（如实际暴击率、命中率），便于玩家验证与优化构筑。

---

# 社交与在线功能
- **排行榜 (Leaderboards)**
	- **荣誉 / PVP 排行榜**: 规则与展示（与关卡偶遇、荣誉积分对应）
	- **其他排行榜**: 待补充完善
- **交易市场 (Trading Market)**: 交易模式与限制
- **PVP遭遇战 (PvP Encounters)**: 匹配与战斗规则
- **聊天系统 (Chat)**

# 用户界面与用户体验 (UI/UX)
- **界面美术风格**
- **核心界面布局**: 主界面、战斗、角色、背包等
- **数据可视化设计**: 如何清晰展示战斗数据与统计
- **操作流程**

# 商业化设计 (Monetization)
- **付费理念**: 如"不破坏核心体验"、"为爱发电"等
- **付费点设计**: 如扩展背包、时装、便利性功能等

# 技术规格 (Technical Specification)

## 技术栈总览

| 层级 | 选型 | 说明 |
|------|------|------|
| 后端 | Go | 高并发、单二进制部署、生态成熟 |
| 前端 | Vue 3 | 组件化、响应式、适合复杂数据展示 |
| 数据库 | SQLite | 初期轻量部署，使用 GORM 便于后续迁移至 PostgreSQL |
| 通信 | REST + WebSocket | REST 常规接口，WebSocket 实时推送 |

## 后端 (Backend)

- **语言与框架**: Go + Gin / Fiber
- **选型理由**:
  - 原生并发支持（goroutine），适合多玩家、战斗结算、离线收益计算等场景
  - 单二进制部署，资源占用低，适合中小规模部署
  - Web 框架成熟，便于快速开发 REST API 与 WebSocket 服务
- **关键技术**:
  - WebSocket: gorilla/websocket 或 nhooyr.io/websocket（战斗日志、聊天等实时推送）
  - 离线收益: 服务端按离线时长计算，保证防作弊与数据一致性

## 前端 (Frontend)

- **框架**: Vue 3
- **选型理由**:
  - Composition API 便于组织战斗日志、数据统计等复杂逻辑
  - 响应式系统适合实时战斗面板、挂机收益统计等动态更新
  - 组件化适合拆解主界面、战斗、角色、背包等模块
- **技术建议**:
  - 状态管理: Pinia
  - 路由: Vue Router
  - UI 风格: 复古像素风（见下方界面美术风格）

## 数据库 (Database)

- **选型**: SQLite（MVP / Alpha 阶段）
- **适用场景**: 单服部署、玩家量级较小、读写并发不高
- **注意事项**:
  - SQLite 为单写锁，高并发写入时会排队
  - 若 Beta / 正式版预期玩家增多或需多服部署，可迁移至 PostgreSQL
- **ORM**: GORM（支持 SQLite 与 PostgreSQL，迁移时仅需调整连接配置）

## 客户端/服务端架构

- **架构模式**: 前后端分离，前端 SPA + 后端 API 服务
- **离线收益**: 服务端权威计算，客户端仅展示与上报在线/离线状态
- **实时通信**: 战斗日志、聊天等通过 WebSocket 推送；排行榜、交易等可先采用 REST + 定时刷新

## 界面美术风格

- **整体风格**: 复古像素风，与「复古极简美学」设计理念一致
- **实现要点**:
  - **字体**: 像素字体（如 Press Start 2P、VT323、Silkscreen）
  - **边框**: 像素块状边框或 1px 实线模拟像素边缘
  - **配色**: 有限色板、低饱和度，营造 CRT 复古感
  - **图像**: `image-rendering: pixelated` 或 `crisp-edges` 保持像素图不模糊
  - **布局**: 网格化、固定宽高，强化「格子感」

## 防作弊策略

- **核心原则**: 所有关键数值在服务端计算，客户端仅负责展示与输入
- **具体措施**:
  - 战斗结算、装备掉落、离线收益等逻辑全部在服务端执行
  - 客户端不参与任何权威数值计算，仅接收服务端结果并展示

# 游戏版本规划 (Roadmap)
- **Alpha 版本核心功能列表**
- **Beta 版本核心功能列表**
- **正式上线版本核心功能列表**
